<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Rob Johnson]]></title>
  <link href="http://www.robjoh.com/atom.xml" rel="self"/>
  <link href="http://www.robjoh.com/"/>
  <updated>2014-08-17T17:52:02-07:00</updated>
  <id>http://www.robjoh.com/</id>
  <author>
    <name><![CDATA[Rob Johnson]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Azure Read Access Geo-redundant Storage Client]]></title>
    <link href="http://www.robjoh.com/blog/2014/05/22/azure-read-access-geo-redundant-storage-client/"/>
    <updated>2014-05-22T14:14:32-07:00</updated>
    <id>http://www.robjoh.com/blog/2014/05/22/azure-read-access-geo-redundant-storage-client</id>
    <content type="html"><![CDATA[<p>On my current project we are working on our Business Continuity Plan for our various dependencies. One of those dependencies, Azure Blob Storage, already provides some redundancy with local or geo-redundant storage. However, you may still suffer some downtime while the failover process is being executed. Azure recently introduced the Read Access Geo-Redundant Storage feature which exposes a secondary endpoint which opens up access to one of the readonly replicas of your storage account. You can enable this on the configure page for your blob storage account and once setup the endpoint can be found on the dashboard.</p>

<p>To use it from the blob storage client you just need to set the desired <a href="http://msdn.microsoft.com/library/azure/microsoft.windowsazure.storage.retrypolicies.locationmode.aspx">LocationMode</a>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='c#'><span class='line'><span class="kt">var</span> <span class="n">account</span> <span class="p">=</span> <span class="n">CloudStorageAccount</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">connectionString</span><span class="p">);</span>
</span><span class='line'><span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="n">account</span><span class="p">.</span><span class="n">CreateCloudBlobClient</span><span class="p">();</span>
</span><span class='line'><span class="n">client</span><span class="p">.</span><span class="n">LocationMode</span> <span class="p">=</span> <span class="n">LocationMode</span><span class="p">.</span><span class="n">PrimaryThenSecondary</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>We will be using <em>PrimaryThenSecondary</em> for our query scenarios. So in the event of an outage the client automatically retries against the secondary replica and our app remains functional. Similarily, we&rsquo;ll be using this for robustness in asset delivery as our CDN&rsquo;s will be configured to use both primary and a secondary/fallback origin.</p>
]]></content>
  </entry>
  
</feed>
